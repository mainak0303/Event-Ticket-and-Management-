<!DOCTYPE html>
<html lang="en">

<head>
    <title>Category List</title>
    <!-- Include your stylesheets -->
    <link href="/vendor/fontawesome-free/css/all.min.css" rel="stylesheet">
    <link href="/css/sb-admin-2.min.css" rel="stylesheet">
</head>

<body id="page-top">
    <div id="wrapper">
        <%- include('../../layouts/sidebar', { activePage: 'categories' }) %>

            <div id="content-wrapper" class="d-flex flex-column">
                <div id="content">
                    <%- include('../../layouts/navbar', { admin: admin, success: success, error: error }) %>

                        <div class="container-fluid">
                            <h1 class="h3 mb-4 text-gray-800">Categories</h1>
                            <a href="/admin/categories/add" class="btn btn-primary mb-3">Add New Category</a>

                            <% if (success) { %>
                                <div class="alert alert-success alert-dismissible">
                                    <%= success %>
                                </div>
                                <% } %>

                                    <% if (error) { %>
                                        <div class="alert alert-danger alert-dismissible">
                                            <%= error %>
                                        </div>
                                        <% } %>

                                            <table class="table table-striped">
                                                <thead>
                                                    <tr>
                                                        <th>Name</th>
                                                        <th>Description</th>
                                                        <th>Actions</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <% categories.forEach(category=> { %>
                                                        <tr>
                                                            <td>
                                                                <%= category.name %>
                                                            </td>
                                                            <td>
                                                                <%= category.description || '' %>
                                                            </td>
                                                            <td>
                                                                <a href="/admin/categories/edit/<%= category._id %>"
                                                                    class="btn btn-sm btn-secondary">Edit</a>
                                                                <form
                                                                    action="/admin/categories/delete/<%= category._id %>?_method=DELETE"
                                                                    method="POST" style="display:inline-block;">
                                                                    <button type="submit" class="btn btn-sm btn-danger"
                                                                        onclick="return confirm('Delete this category?')">Delete</button>
                                                                </form>

                                                            </td>
                                                        </tr>
                                                        <% }) %>
                                                            <% if (categories.length===0) { %>
                                                                <tr>
                                                                    <td colspan="3" class="text-center">No categories
                                                                        found.</td>
                                                                </tr>
                                                                <% } %>
                                                </tbody>
                                            </table>
                        </div>

                        <%- include('../../layouts/footer') %>
                </div>
            </div>
    </div>

    <script src="/vendor/jquery/jquery.min.js"></script>
    <script src="/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
</body>

</html>